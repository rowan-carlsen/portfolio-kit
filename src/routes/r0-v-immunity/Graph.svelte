<script>
    export let xVal = 1;

    $: yVal = 1 - 1 / xVal;
</script>

<div id="container">
    <svg xmlns="http://www.w3.org/2000/svg" id="graph" viewBox="-20 0 600 605">
        <defs>
            <style>
                text {
                    font-size: 14px;
                }
                #indicator {
                    stroke: red;
                    stroke-width: 2px;
                    stroke-dasharray: 10px;
                    fill: none;
                    fill-opacity: 0.5;
                }
            </style>
        </defs>
        <text text-anchor="middle" x="300" y="50" style="font-size: 18px;"
            >R<tspan style="font-size: 14px;">0</tspan>: {xVal.toFixed(1)}<tspan
                x="300"
                dy="25"
                >{(yVal * 100).toFixed(1) + '%'} Immunization rate required for Herd
                Immunity</tspan
            ></text>
        <path
            d="m525.9 552.8 21.6 7.2-21.6 7.2 3.6-7.2zM32.8 75.6 40 54l7.2 21.6L40 72z"
            stroke="#000" />
        <path
            d="M22 560h507.5M40 72v506m0-14.5v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7m23 7v-7M43.5 560h-7m7-47h-7m7-47h-7m7-47h-7m7-47h-7m7-47h-7m7-47h-7m7-47h-7m7-47h-7m7-47h-7m7-47h-7"
            stroke-width="2"
            stroke="#000"
            fill="none" />
        <text id="null" x="65" y="576" text-anchor="left" fill="#000">1</text>
        <text x="86" y="576" text-anchor="middle">2</text>
        <text x="109" y="576" text-anchor="middle">3</text>
        <text x="132" y="576" text-anchor="middle">4</text>
        <text x="155" y="576" text-anchor="middle">5</text>
        <text x="178" y="576" text-anchor="middle">6</text>
        <text x="201" y="576" text-anchor="middle">7</text>
        <text x="224" y="576" text-anchor="middle">8</text>
        <text x="247" y="576" text-anchor="middle">9</text>
        <text x="270" y="576" text-anchor="middle">10</text>
        <text x="293" y="576" text-anchor="middle">11</text>
        <text x="316" y="576" text-anchor="middle">12</text>
        <text x="339" y="576" text-anchor="middle">13</text>
        <text x="362" y="576" text-anchor="middle">14</text>
        <text x="385" y="576" text-anchor="middle">15</text>
        <text x="408" y="576" text-anchor="middle">16</text>
        <text x="431" y="576" text-anchor="middle">17</text>
        <text x="454" y="576" text-anchor="middle">18</text>
        <text x="477" y="576" text-anchor="middle">19</text>
        <text x="500" y="576" text-anchor="middle">20</text>
        <text x="293" y="596" text-anchor="middle" style="font-size: 16px;"
            >R<tspan style="font-size: 12px;">0</tspan></text>
        <text x="33.333" y="517.666" text-anchor="end">10%</text>
        <text x="33.333" y="470.666" text-anchor="end">20%</text>
        <text x="33.333" y="423.666" text-anchor="end">30%</text>
        <text x="33.333" y="376.666" text-anchor="end">40%</text>
        <text x="33.333" y="329.666" text-anchor="end">50%</text>
        <text x="33.333" y="282.666" text-anchor="end">60%</text>
        <text x="33.333" y="235.666" text-anchor="end">70%</text>
        <text x="33.333" y="188.666" text-anchor="end">80%</text>
        <text x="33.333" y="141.666" text-anchor="end">90%</text>
        <text x="33.333" y="94.666" text-anchor="end">100%</text>
        <text
            x="-10"
            y="330"
            text-anchor="middle"
            style="font-size: 16px; transform-box: fill-box; transform-origin: center; transform:rotate(-90deg);"
            >% of Population Immune
        </text>
        <path
            d="m62.336 574.1 1.238-25.563.786-14.792.786-13.867.786-13.026.786-12.261.786-11.56.785-10.917.786-10.328.786-9.783.786-9.283.786-8.818.786-8.387.785-7.989.786-7.617.786-7.27.786-6.948.786-6.645.786-6.363.785-6.098.786-5.848.786-5.615.786-5.395.786-5.187.786-4.991.785-4.807.786-4.631.786-4.467.786-4.309.786-4.161.786-4.02.785-3.886.786-3.758.786-3.638.786-3.521.786-3.412.786-3.307.785-3.207.786-3.11.786-3.02.786-2.932.786-2.848.786-2.767.785-2.691.786-2.618.786-2.546.786-2.479.786-2.413.786-2.351.785-2.29.786-2.232.786-2.177.786-2.123.786-2.071.786-2.021.785-1.973.786-1.927.786-1.882.786-1.838.786-1.797.786-1.756.785-1.718.786-1.679.786-1.644.786-1.607.786-1.574.786-1.54.785-1.509.786-1.477.786-1.447.786-1.418.786-1.389.786-1.362.785-1.336.786-1.309.786-1.284.786-1.26.786-1.236.786-1.213.785-1.19.786-1.169.786-1.147.786-1.127.786-1.106.786-1.087.785-1.068.786-1.049.786-1.031.786-1.014.786-.996.786-.98.785-.963.786-.948.786-.931.786-.917.786-.902.786-.888.785-.873.786-.86.786-.846.786-.833.786-.82.786-.808.785-.796.786-.783.786-.772.786-.76.786-.75.786-.738.785-.728.786-.717.786-.707.786-.696.786-.687.786-.678.785-.668.786-.659.786-.65.786-.64.786-.633.786-.624.785-.615.786-.607.786-.6.786-.591.786-.584.786-.576.785-.569.786-.562.786-.554.786-.548.786-.541.786-.534.785-.527.786-.521.786-.515.786-.508.786-.502.786-.497.785-.49.786-.484.786-.479.786-.473.786-.468.786-.462.785-.457.786-.452.786-.447.786-.441.786-.437.786-.432.785-.427.786-.422.786-.417.786-.413.786-.409.786-.404.785-.4.786-.395.786-.392.786-.387.786-.383.786-.379.785-.375.786-.371.786-.368.786-.363.786-.36.785-.357.786-.352.786-.349.786-.346.786-.342.786-.339.785-.335.786-.333.786-.329.786-.325.786-.323.786-.319.785-.317.786-.313.786-.311.786-.307.786-.305.786-.302.785-.299.786-.296.786-.293.786-.291.786-.288.786-.286.785-.283.786-.28.786-.278.786-.275.786-.273.786-.271.785-.268.786-.266.786-.263.786-.261.786-.259.786-.257.785-.254.786-.253.786-.25.786-.248.786-.246.786-.244.785-.242.786-.239.786-.238.786-.236.786-.234.786-.232.785-.23.786-.228.786-.227.786-.224.786-.223.786-.221.785-.219.786-.218.786-.216.786-.214.786-.212.786-.211.785-.209.786-.207.786-.206.786-.204.786-.203.786-.201.785-.2.786-.198.786-.197.786-.195.786-.193.786-.193.785-.191.786-.189.786-.188.786-.187.786-.185.786-.184.785-.182.786-.182.786-.179.786-.179.786-.177.786-.177.785-.174.786-.174.786-.172.786-.171.786-.17.786-.169.785-.168.786-.166.786-.165.786-.165.786-.163.786-.162.785-.16.786-.16.786-.159.786-.157.786-.157.786-.155.785-.154.786-.154.786-.152.786-.151.786-.151.786-.149.785-.148.786-.148.786-.146.786-.146.786-.144.786-.144.785-.143.786-.141.786-.141.786-.14.786-.139.786-.138.785-.138.786-.136.786-.136.786-.135.786-.134.786-.133.785-.132.786-.131.786-.131.786-.13.786-.129.786-.128.785-.128.786-.126.786-.126.786-.125.786-.125.786-.124.785-.122.786-.123.786-.121.786-.121.786-.12.786-.119.785-.119.786-.118.786-.117.786-.117.786-.116.786-.115.785-.115.786-.113.786-.114.786-.112.786-.112.786-.112.785-.11.786-.11.786-.11.786-.109.786-.108.786-.108.785-.107.786-.106.786-.106.786-.105.786-.105.786-.104.785-.104.786-.102.786-.103.786-.102.786-.101.786-.101.785-.1.786-.1.786-.099.786-.098.786-.099.786-.097.785-.097.786-.097.786-.096.786-.095.786-.095.786-.095.785-.094.786-.093.786-.093.786-.093.786-.092.786-.092.785-.091.786-.09.786-.091.786-.089.786-.09.786-.089.785-.088.786-.088.786-.087.786-.087.786-.087.786-.086.785-.086.786-.085.786-.085.786-.085.786-.084.786-.083.785-.084.786-.083.786-.082.786-.082.786-.082.785-.081.786-.081.786-.08.786-.08.786-.08.786-.079.785-.079.786-.079.786-.078.786-.078.786-.077.786-.077.785-.077.786-.076.786-.076.786-.076.786-.075.786-.075.785-.075.786-.074.786-.074.786-.073.786-.073.786-.073.785-.073.786-.072.786-.072.786-.071.786-.072.786-.071.785-.07.786-.07.786-.07.786-.07.786-.069.786-.069.785-.069.786-.068.786-.068.786-.068.786-.068.786-.067.785-.067.786-.066.786-.067.786-.066.786-.065.786-.066.785-.065.786-.065.786-.064.786-.065.786-.064.786-.063.785-.064.786-.063.786-.063.786-.063.786-.062.786-.062.785-.062.786-.062.786-.061.786-.061.786-.061.786-.061.785-.06.786-.06.786-.06.786-.06.786-.059.786-.059.785-.059.786-.058.786-.059.786-.058.786-.058.786-.057.785-.058.786-.057.786-.057.786-.057.786-.056.786-.056.785-.056.786-.056.786-.056.786-.055.786-.055.786-.055.785-.055.786-.054.786-.055.786-.054.786-.054.786-.053.785-.054.786-.053.786-.053.786-.053.786-.052.786-.052.785-.053.786-.052.786-.051.786-.052.786-.051.786-.051.785-.051.786-.051.786-.051.786-.05.786-.05.786-.05.785-.05.786-.05.786-.049.786-.05.786-.049.786-.048.785-.049.786-.049.786-.048.786-.048.786-.048.786-.048.785-.048.786-.047.786-.047.786-.047.786-.047.786-.047.785-.047.786-.046.786-.046.786-.046.786-.046.786-.046.785-.045.786-.046.786-.045.786-.045.786-.045.786-.045.785-.044.786-.045.786-.044.786-.044.786-.044.786-.044.785-.043.786-.044.786-.043.786-.043.786-.043.786-.043.785-.043.786-.043.786-.042.786-.042.786-.042.786-.042.785-.042.786-.042.786-.041.786-.042.786-.041.786-.041.785-.041.786-.041.786-.041.786-.04.786-.041.786-.04.785-.04.786-.04.786-.04.786-.039.786-.04.786-.04.785-.039.786-.039.786-.039.786-.039.786-.039.786-.038.785-.039.786-.038.786-.039.786-.038.786-.038.786-.038.785-.037.786-.038.786-.038.786-.037.786-.037.786-.037.785-.037.786-.037.786-.037.786-.037.786-.036.786-.037.785-.036.786-.036.786-.036"
            stroke-width="3"
            stroke="#000"
            fill="none" />
        <rect
            id="indicator"
            x="40"
            y={90 + 470 * (1 - yVal)}
            width={xVal * 23}
            height={560 - (90 + 470 * (1 - yVal))} />
    </svg>
</div>

<style>
    #container {
        margin: 0 auto;
        width: 100%;
        max-width: 550px;
    }
    svg {
        width: 100%;
        height: auto;
    }
</style>
